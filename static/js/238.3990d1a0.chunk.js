"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[238],{6238:function(e,t,n){n.r(t),n.d(t,{default:function(){return me}});var a=n(2791),i=n(586),r=n(3388),o=n(5529),l=n(1087),s=n(7689),c=n(8935),u=n(7309),d=n(184);function f(){return(0,d.jsx)(c.ZP,{status:"404",title:"404",subTitle:"Sorry, the page you visited does not exist.",extra:(0,d.jsx)(l.rU,{to:"/",children:(0,d.jsx)(u.Z,{type:"primary",children:"Back Home"})})})}var m=n(7063),h=function(){return(0,d.jsx)("div",{children:"SalesReport"})},p=n(3433),x=n(1413),Z=n(9439),j=n(8302),g=n(4260),v=n(7615),y=n(6106),b=n(914),C=n(458),w=n(1717),k=n(9998),D=n(4215),S=n(5671),T=n(3144),I=n(7205),R=function(){function e(){(0,S.Z)(this,e)}return(0,T.Z)(e,null,[{key:"list",value:function(e){return I.Z.get(this.baseURL+"/list",{params:e})}},{key:"detail",value:function(e,t){return I.Z.get(this.baseURL+"/details/"+e,{params:t})}},{key:"save",value:function(e){return I.Z.post(this.baseURL+"/save",e)}},{key:"delete",value:function(e){return I.Z.post(this.baseURL+"/delete",{ids:e})}},{key:"saveFromCSVUrl",value:function(e){return I.Z.post(this.baseURL+"/csv-upload",e)}},{key:"checkPrevTransation",value:function(e){return I.Z.post(this.baseURL+"/check-prev-transation",e)}},{key:"listBillReport",value:function(e){return I.Z.get(this.baseURL+"/list-bill-report",{params:e})}}]),e}();R.baseURL="transation";var A=function(){function e(){(0,S.Z)(this,e)}return(0,T.Z)(e,null,[{key:"list",value:function(e){return I.Z.get(this.baseURL+"/list",{params:e})}},{key:"detail",value:function(e,t){return I.Z.get(this.baseURL+"/details/"+e,{params:t})}},{key:"save",value:function(e){return I.Z.post(this.baseURL+"/save",e)}},{key:"delete",value:function(e){return I.Z.post(this.baseURL+"/delete",{ids:e})}}]),e}();A.baseURL="account";var N=n(2339),Y=n(4099);function _(e){var t=e.qData,n=e.setQData;return(0,d.jsx)(d.Fragment,{children:t.total>0?(0,d.jsx)(Y.Z,{total:t.total,showTotal:function(){var e=(t.page-1)*t.limit*1+1,n=t.page*t.limit;return(0,d.jsx)(N.Z,{children:"Showing "+e+" - "+n+" out of "+t.total})},pageSize:t.limit,current:t.page,onChange:function(e,a){t.limit!==a?n((0,x.Z)((0,x.Z)({},t),{},{page:1,limit:a})):n((0,x.Z)((0,x.Z)({},t),{},{page:e}))},showSizeChanger:!0}):null})}var F=n(2426),M=n.n(F),E=n(7027);function L(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";e&&("success"===t&&E.ZP.success(e),"error"===t&&E.ZP.error(e),"warning"===t&&E.ZP.warning(e))}function q(e){var t=e.transactionType,n=void 0===t?"credit":t,i=window.location.pathname.split("/")[2],r=(0,a.useState)([]),o=(0,Z.Z)(r,2),l=o[0],s=o[1],c=(0,a.useState)(!1),f=(0,Z.Z)(c,2),m=f[0],h=f[1],v=(0,a.useState)([]),y=(0,Z.Z)(v,2),b=y[0],C=y[1],w=(0,a.useState)({page:1,limit:20,transactionType:n}),k=(0,Z.Z)(w,2),S=k[0],T=k[1],I=(0,a.useRef)(),N=[{title:"Account Name",dataIndex:"accountDetails",render:function(e){return null===e||void 0===e?void 0:e.name}},{title:"Date",dataIndex:"date",width:150,render:function(e){return M()(e).format("DD MMM YYYY")}},{title:"Amount",dataIndex:"amount",width:150},{title:"Previous Billing Amount",dataIndex:"previousCreditAmount",width:200},{title:"Previous Selling Amount",dataIndex:"previousDebitAmount",width:200},{title:"Account Initial Amount",dataIndex:"accountDetails",width:200,render:function(e){return null===e||void 0===e?void 0:e.initialAmount}},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(u.Z,{type:"primary",size:"small",icon:(0,d.jsx)(D.Z,{}),onClick:function(){I.current.openForm(t._id)}})})}}].filter((function(e){return!e.hidden}));function Y(){h(!0),R.listBillReport(S).then((function(e){var t;s(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{key:e.accountId})}))),T((0,x.Z)((0,x.Z)({},S),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){h(!1)}))}var F=function(e){R.delete(e).then((function(e){L(e.message),Y()})).catch((function(e){L(e.message,"error")}))},E=N.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{ellipsis:!1})}));E[0].fixed=!0,E[E.length-1].fixed="right";var q={bordered:!0,loading:m,size:"small",title:function(){return(0,d.jsx)(B,{addNewModalRef:I,deleteData:F,qData:S,setQData:T,list:Y,accounts:b})},showHeader:!0,footer:function(){return(0,d.jsx)(_,{qData:S,setQData:T})},tableLayout:void 0};return(0,a.useEffect)((function(){T((0,x.Z)((0,x.Z)({},S),{},{transactionType:"sales-transaction"===i?"debit":"credit"}))}),[i]),(0,a.useEffect)((function(){Y()}),[S.page,S.limit,S.transactionType]),(0,a.useEffect)((function(){A.list({isAll:1}).then((function(e){C(e.data)})).catch((function(e){"object"===typeof e.message?L(e.message[Object.keys(e.message)[0]],"error"):L(e.message,"error")}))}),[]),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(j.Z.Title,{level:5,style:{margin:0},children:"List of  Transactions"}),(0,d.jsx)(g.Z,(0,x.Z)((0,x.Z)({},q),{},{pagination:{position:["none"],pageSize:S.limit},columns:E,dataSource:l.length?l:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"},expandable:{rowExpandable:function(e){return!0},expandedRowRender:function(e){return(0,d.jsxs)(d.Fragment,{children:[console.log(e.key),(0,d.jsx)("div",{style:{display:"flex",flexDirection:"row-reverse"},children:(0,d.jsx)(g.Z,{bordered:!0,pagination:!1,size:"small",dataSource:[].concat((0,p.Z)(e.previousCreditTransactions),(0,p.Z)(e.previousDebitTransactions),[{date:"Total",transactionType:"total"}]),columns:[{title:"Date",dataIndex:"date",align:"left",width:200,render:function(e){return"Total"!==e?M()(e).format("DD MMM YYYY"):(0,d.jsx)("b",{children:"Total"})}},{title:"Bill",dataIndex:"amount",width:100,align:"right",render:function(t,n){return["credit","debit"].includes(n.transactionType)?"credit"===n.transactionType?t:"":"Total"===n.date?(0,d.jsx)("b",{children:null===(a=e.previousCreditTransactions)||void 0===a?void 0:a.reduce((function(e,t){return e+t.amount}),e.accountDetails.initialAmount+e.previousCreditAmount||0)}):void 0;var a}},{title:"Sale",dataIndex:"amount",width:100,align:"right",render:function(t,n){return["credit","debit"].includes(n.transactionType)?"debit"===n.transactionType?t:"":"Total"===n.date?(0,d.jsx)("b",{children:null===(a=e.previousDebitTransactions)||void 0===a?void 0:a.reduce((function(e,t){return e+t.amount}),e.previousDebitAmount||0)}):void 0;var a}}]})})]})}}})),(0,d.jsx)(U,{ref:I,list:Y,accounts:b})]})}function B(e){e.addNewModalRef;var t=e.qData,n=e.setQData,a=e.list,i=e.accounts;return(0,d.jsx)(v.Z,{onSubmitCapture:a,className:"search-form",children:(0,d.jsxs)(y.Z,{gutter:[12,2],children:[(0,d.jsx)(b.Z,{span:4,children:(0,d.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,d.jsx)(C.Z,{placeholder:"Choose a account",value:t.accountId,onChange:function(e){n((0,x.Z)((0,x.Z)({},t),{},{accountId:e}))},allowClear:!0,children:i.map((function(e){return(0,d.jsx)(C.Z.Option,{value:e._id,children:e.name},e._id)}))})})}),(0,d.jsx)(b.Z,{span:4,children:(0,d.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,d.jsx)(w.Z.RangePicker,{format:"DD MMM YYYY",onChange:function(e){n((0,x.Z)((0,x.Z)({},t),{},{startTime:new Date(e[0]),endTime:new Date(e[1])}))}})})}),(0,d.jsx)(b.Z,{span:3,children:(0,d.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,d.jsx)(u.Z,{type:"primary",htmlType:"submit",children:"Search"})})}),(0,d.jsx)(b.Z,{span:10})]})})}var U=(0,a.forwardRef)((function(e,t){var n=(0,a.useState)(!1),i=(0,Z.Z)(n,2),r=i[0],o=i[1];return(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){o(!0)}}})),(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(k.Z,{title:"Report Details",style:{top:20},open:r,okText:"Save",onCancel:function(){o(!1)},maskClosable:!1,width:400,className:"app-modal-body-overflow",footer:null})})})),O=n(5820),z=n(9389),P=n(43),H=n(2622),Q=n(1752),V=n(9286),W=n(7106);function G(e){var t=e.accountId,n=void 0===t?null:t,i=(0,a.useState)([]),r=(0,Z.Z)(i,2),o=r[0],l=r[1],s=(0,a.useState)(!1),c=(0,Z.Z)(s,2),f=c[0],m=c[1],h=(0,a.useState)([]),p=(0,Z.Z)(h,2),v=p[0],y=p[1],b=(0,a.useState)([]),C=(0,Z.Z)(b,2),w=C[0],k=C[1],D=(0,a.useState)({page:1,limit:20,accountId:n}),S=(0,Z.Z)(D,2),T=S[0],I=S[1],N=(0,a.useRef)(),Y=[{title:"Account Name",dataIndex:"accountDetail",render:function(e){return null===e||void 0===e?void 0:e.name}},{title:"Date",dataIndex:"date",width:150,render:function(e){return M()(e).format("DD MMM YYYY")}},{title:"Amount",dataIndex:"amount",width:150},{title:"Bill Number",dataIndex:"billNumber",width:150},{title:"Amount",dataIndex:"amount",width:150},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(O.Z,{title:"Are you sure to delete this Account data?",onConfirm:function(){E(t._id)},okText:"Yes",cancelText:"No",children:[(0,d.jsx)(u.Z,{type:"primary",size:"small",danger:!0,icon:(0,d.jsx)(H.Z,{})}),"\xa0"]}),(0,d.jsx)(u.Z,{type:"primary",size:"small",icon:(0,d.jsx)(Q.Z,{}),onClick:function(){N.current.openForm(t._id)}})]})}}].filter((function(e){return!e.hidden}));function F(){m(!0),R.list(T).then((function(e){var t;l(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{key:e._id})}))),I((0,x.Z)((0,x.Z)({},T),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){m(!1)}))}var E=function(e){R.delete(e).then((function(e){L(e.message),F(),y([])})).catch((function(e){L(e.message,"error")}))},q=Y.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{ellipsis:!1})}));q[0].fixed=!0,q[q.length-1].fixed="right";var B={bordered:!0,loading:f,title:function(){return(0,d.jsx)(J,{addNewModalRef:N,selected:v,deleteData:E,qData:T,setQData:I,list:F,accounts:w})},size:"small",showHeader:!0,footer:function(){return(0,d.jsx)(_,{qData:T,setQData:I})},rowSelection:{onChange:function(e){y(e)}},tableLayout:void 0};return(0,a.useEffect)((function(){F()}),[T.page,T.limit]),(0,a.useEffect)((function(){A.list({isAll:1}).then((function(e){k(e.data)})).catch((function(e){"object"===typeof e.message?L(e.message[Object.keys(e.message)[0]],"error"):L(e.message,"error")}))}),[]),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(j.Z.Title,{level:5,style:{margin:0},children:"List of  Transactions"}),(0,d.jsx)(g.Z,(0,x.Z)((0,x.Z)({},B),{},{pagination:{position:["none"],pageSize:T.limit},columns:q,dataSource:o.length?o.filter((function(e){return"credit"===e.transactionType})):[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"},expandable:{expandedRowRender:function(e){return o.map((function(e){if("debit"===e.transactionType)return(0,d.jsxs)("div",{style:{marginLeft:"5rem",marginBottom:"1rem"},children:[(0,d.jsx)("span",{style:{marginRight:"2rem"},children:e.accountDetail.name}),(0,d.jsx)("span",{style:{marginRight:"2rem"},children:M()(e.date).format("DD MMM YYYY")}),(0,d.jsx)("span",{style:{marginRight:"2rem"},children:e.amount}),(0,d.jsx)("span",{style:{marginRight:"2rem"},children:e.billNumber}),(0,d.jsx)("span",{style:{marginRight:"2rem"},children:e.transactionType})]})}))},rowExpandable:function(e){return"Not Expandable"!==e.name}}})),(0,d.jsx)(K,{ref:N,list:F,accounts:w})]})}function J(e){e.addNewModalRef;var t=e.selected,n=e.deleteData,a=e.qData,i=e.setQData,r=e.list;e.accounts;return(0,d.jsx)(v.Z,{onSubmitCapture:r,className:"search-form",children:(0,d.jsxs)(y.Z,{gutter:[12,2],children:[(0,d.jsx)(b.Z,{span:4,children:(0,d.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,d.jsx)(w.Z.RangePicker,{format:"DD MMM YYYY",onChange:function(e){i((0,x.Z)((0,x.Z)({},a),{},{startTime:new Date(e[0]),endTime:new Date(e[1])}))}})})}),(0,d.jsx)(b.Z,{span:3,children:(0,d.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,d.jsx)(u.Z,{type:"primary",htmlType:"submit",children:"Search"})})}),(0,d.jsx)(b.Z,{span:10,children:t.length?(0,d.jsx)(O.Z,{title:"Are you sure to delete these selected Data?",onConfirm:function(){n(t)},okText:"Yes",cancelText:"No",children:(0,d.jsx)(u.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,d.jsx)(H.Z,{}),children:"Delete Selected"})}):null})]})})}var K=(0,a.forwardRef)((function(e,t){var n=e.list,i=e.accounts,r=(0,a.useState)(!1),o=(0,Z.Z)(r,2),l=o[0],s=o[1],c=(0,a.useState)({aspect:1}),f=(0,Z.Z)(c,2),m=f[0],h=f[1],p=(0,a.useState)(!1),j=(0,Z.Z)(p,2),g=j[0],D=j[1],S=function(e){Object.entries(e).forEach((function(e){for(var t=m,n=e[0],a=e[1],i=n.split("."),r=0;r<i.length;r++)r+1===i.length?t[i[r]]=a:("undefined"===typeof t[i[r]]&&(1*parseInt(i[r+1])>=0?t[i[r]]=[]:t[i[r]]={}),t=t[i[r]])})),h((0,x.Z)({},m))};(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){s(!0),h(e?{_id:e}:{status:!0})}}}));var T=function(){D(!0),R.save(m).then((function(e){L(e.message),S((0,x.Z)({},e.data)),n()})).catch((function(e){"object"===typeof e.message?L(e.message[Object.keys(e.message)[0]],"error"):L(e.message,"error")})).finally((function(){D(!1)}))};return(0,a.useEffect)((function(){m._id&&(D(!0),R.detail(m._id).then((function(e){h(e.data||{})})).catch((function(e){L(e.message,"error")})).finally((function(){D(!1)})))}),[m._id]),(0,a.useEffect)((function(){l||h({_id:null})}),[l]),(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(k.Z,{title:(m._id?"Edit":"Add")+" Transaction Data",style:{top:20},open:l,okText:"Save",onOk:T,okButtonProps:{disabled:g},onCancel:function(){s(!1)},maskClosable:!1,width:1200,className:"app-modal-body-overflow",footer:[(0,d.jsx)(u.Z,{onClick:function(){s(!1)},children:"Cancel"},"cancel"),(0,d.jsx)(u.Z,{type:"primary",onClick:T,children:"Save"},"save")],children:(0,d.jsx)(P.Z,{spinning:g,indicator:(0,d.jsx)(W.Z,{style:{fontSize:24},spin:!0}),children:(0,d.jsx)(v.Z,{layout:"vertical",children:(0,d.jsxs)(y.Z,{gutter:[12,2],children:[(0,d.jsx)(b.Z,{span:6,children:(0,d.jsx)(v.Z.Item,{label:"Account Id",required:!0,children:(0,d.jsx)(C.Z,{value:m.accountId,onChange:function(e){S({accountId:e})},children:i.map((function(e){return(0,d.jsx)(C.Z.Option,{value:e._id,children:e.name},e._id)}))})})}),(0,d.jsx)(b.Z,{span:6,children:(0,d.jsx)(v.Z.Item,{label:"Amount",required:!0,children:(0,d.jsx)(z.Z,{placeholder:"Enter Amount",type:"number",min:0,value:m.amount,onChange:function(e){return S({amount:e.target.value})}})})}),(0,d.jsx)(b.Z,{span:6,children:(0,d.jsx)(v.Z.Item,{label:"Type",required:!0,children:(0,d.jsx)(z.Z,{placeholder:"Enter your type",value:m.type,onChange:function(e){return S({type:e.target.value})}})})}),(0,d.jsx)(b.Z,{span:6,children:(0,d.jsx)(v.Z.Item,{label:"Bill Number",required:!0,children:(0,d.jsx)(z.Z,{placeholder:"Enter bill number",value:m.billNumber,onChange:function(e){return S({billNumber:e.target.value})}})})}),(0,d.jsx)(b.Z,{span:12,children:(0,d.jsx)(v.Z.Item,{label:"Account Recievable",required:!0,children:(0,d.jsx)(z.Z,{value:m.accountRecievable,onChange:function(e){return S({accountRecievable:e.target.value})}})})}),(0,d.jsx)(b.Z,{span:6,children:(0,d.jsx)(v.Z.Item,{label:"Date",required:!0,children:(0,d.jsx)(w.Z,{format:"DD MMM YYYY",onChange:function(e){S({date:e})},value:M()(null===m||void 0===m?void 0:m.date),className:"w-100"})})}),(0,d.jsx)(b.Z,{span:6,children:(0,d.jsx)(v.Z.Item,{label:"Transaction Type",required:!0,children:(0,d.jsxs)(C.Z,{value:m.transactionType,onChange:function(e){S({transactionType:e})},children:[(0,d.jsx)(C.Z.Option,{value:"credit",children:"Credit"}),(0,d.jsx)(C.Z.Option,{value:"debit",children:"Debit"})]})})}),(0,d.jsx)(b.Z,{span:24,children:(0,d.jsx)(v.Z.Item,{label:"Comment",children:(0,d.jsx)(z.Z.TextArea,{cols:8,rows:6,value:m.comment,onChange:function(e){return S({comment:e.target.value})}})})})]})})})})})}));function X(e){var t=e.type,n=(0,a.useState)([]),i=(0,Z.Z)(n,2),r=i[0],o=i[1],l=(0,a.useState)(!1),s=(0,Z.Z)(l,2),c=s[0],f=s[1],m=(0,a.useState)([]),h=(0,Z.Z)(m,2),p=h[0],v=h[1],y=(0,a.useState)({page:1,limit:20}),b=(0,Z.Z)(y,2),C=b[0],w=b[1],k=(0,a.useRef)(),S=(0,a.useRef)(),T=[{title:"Name",dataIndex:"name"},{title:"Initial Amount",dataIndex:"initialAmount",width:150},{title:"Status",dataIndex:"status",width:80,render:function(e,t){return"opened"===t.status?(0,d.jsx)(N.Z,{color:"green",children:"Opened"}):(0,d.jsx)(N.Z,{color:"red",children:"Closed"})}},{title:"Action",dataIndex:"_id",width:110,render:function(e,t){return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(O.Z,{title:"Are you sure to delete this Account data?",onConfirm:function(){R(t._id)},okText:"Yes",cancelText:"No",children:[(0,d.jsx)(u.Z,{type:"primary",size:"small",danger:!0,icon:(0,d.jsx)(H.Z,{})}),"\xa0"]}),(0,d.jsx)(u.Z,{type:"primary",size:"small",icon:(0,d.jsx)(Q.Z,{}),onClick:function(){k.current.openForm(t._id)},style:{marginRight:"4px"}}),(0,d.jsx)(u.Z,{type:"primary",size:"small",icon:(0,d.jsx)(D.Z,{}),onClick:function(){S.current.openForm(t._id)}})]})}}].filter((function(e){return!e.hidden}));function I(){f(!0),A.list(C).then((function(e){var t;o(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{key:e._id})}))),w((0,x.Z)((0,x.Z)({},C),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){f(!1)}))}var R=function(e){A.delete(e).then((function(e){L(e.message),I(),v([])})).catch((function(e){L(e.message,"error")}))},Y=T.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{ellipsis:!1})}));Y[0].fixed=!0,Y[Y.length-1].fixed="right";var F={bordered:!0,loading:c,size:"small",title:function(){return(0,d.jsx)($,{addNewModalRef:k,selected:p,deleteData:R,qData:C,setQData:w,list:I})},showHeader:!0,footer:function(){return(0,d.jsx)(_,{qData:C,setQData:w})},rowSelection:{onChange:function(e){v(e)}},tableLayout:void 0};return(0,a.useEffect)((function(){I()}),[C.page,C.limit]),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(j.Z.Title,{level:5,children:"List of  Accounts"}),(0,d.jsx)(g.Z,(0,x.Z)((0,x.Z)({},F),{},{pagination:{position:["none"],pageSize:C.limit},columns:Y,dataSource:r.length?r:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,d.jsx)(ee,{ref:k,list:I,type:t}),(0,d.jsx)(te,{ref:S})]})}function $(e){var t=e.addNewModalRef,n=e.selected,a=e.deleteData,i=e.qData,r=e.setQData,o=e.list;return(0,d.jsx)(v.Z,{onSubmitCapture:o,className:"search-form",children:(0,d.jsxs)(y.Z,{gutter:[12,2],children:[(0,d.jsx)(b.Z,{span:4,children:(0,d.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,d.jsx)(z.Z,{placeholder:"Search by name",onChange:function(e){r((0,x.Z)((0,x.Z)({},i),{},{key:e.target.value}))}})})}),(0,d.jsx)(b.Z,{span:3,children:(0,d.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,d.jsx)(u.Z,{type:"primary",htmlType:"submit",children:"Search"})})}),(0,d.jsxs)(b.Z,{span:5,children:[(0,d.jsx)(v.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,d.jsx)(u.Z,{type:"primary",icon:(0,d.jsx)(V.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,d.jsx)(O.Z,{title:"Are you sure to delete these selected Data?",onConfirm:function(){a(n)},okText:"Yes",cancelText:"No",children:(0,d.jsx)(u.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,d.jsx)(H.Z,{}),children:"Delete Selected"})}):null]})]})})}var ee=(0,a.forwardRef)((function(e,t){var n=e.list,i=(0,a.useState)(!1),r=(0,Z.Z)(i,2),o=r[0],l=r[1],s=(0,a.useState)({aspect:1}),c=(0,Z.Z)(s,2),f=c[0],m=c[1],h=(0,a.useState)(!1),p=(0,Z.Z)(h,2),j=p[0],g=p[1],w=function(e){m((0,x.Z)((0,x.Z)({},f),e))};(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){l(!0),m(e?{_id:e}:{status:!0})}}}));var D=function(){g(!0),A.save(f).then((function(e){L(e.message),w((0,x.Z)({},e.data)),n()})).catch((function(e){"object"===typeof e.message?L(e.message[Object.keys(e.message)[0]],"error"):L(e.message,"error")})).finally((function(){g(!1)}))};return(0,a.useEffect)((function(){f._id&&(g(!0),A.detail(f._id).then((function(e){m(e.data||{})})).catch((function(e){L(e.message,"error")})).finally((function(){g(!1)})))}),[f._id]),(0,a.useEffect)((function(){o||m({_id:null})}),[o]),(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(k.Z,{title:(f._id?"Edit":"Add")+" Account Data",style:{top:20},open:o,okText:"Save",onOk:D,okButtonProps:{disabled:j},onCancel:function(){l(!1)},destroyOnClose:!0,maskClosable:!1,width:600,className:"app-modal-body-overflow",footer:[(0,d.jsx)(u.Z,{onClick:function(){l(!1)},children:"Cancel"},"cancel"),(0,d.jsx)(u.Z,{type:"primary",onClick:D,children:"Save"},"save")],children:(0,d.jsx)(P.Z,{spinning:j,indicator:(0,d.jsx)(W.Z,{style:{fontSize:24},spin:!0}),children:(0,d.jsx)(v.Z,{layout:"vertical",children:(0,d.jsxs)(y.Z,{gutter:[0,2],children:[(0,d.jsx)(b.Z,{span:24,children:(0,d.jsx)(v.Z.Item,{label:"Name",required:!0,children:(0,d.jsx)(z.Z,{placeholder:"Enter Name",value:f.name,onChange:function(e){return w({name:e.target.value})}})})}),(0,d.jsx)(b.Z,{span:24,children:(0,d.jsx)(v.Z.Item,{label:"Initial Amount",required:!0,children:(0,d.jsx)(z.Z,{type:"number",defaultValue:0,value:f.initialAmount,onChange:function(e){return w({initialAmount:e.target.value})}})})}),(0,d.jsx)(b.Z,{span:24,children:(0,d.jsx)(v.Z.Item,{label:"Status",required:!0,children:(0,d.jsxs)(C.Z,{value:f.status,onChange:function(e){w({status:e})},children:[(0,d.jsx)(C.Z.Option,{value:"opened",children:"Opened"}),(0,d.jsx)(C.Z.Option,{value:"closed",children:"Closed"})]})})})]})})})})})})),te=(0,a.forwardRef)((function(e,t){var n=(0,a.useState)(!1),i=(0,Z.Z)(n,2),r=i[0],o=i[1],l=(0,a.useState)({aspect:1}),s=(0,Z.Z)(l,2),c=s[0],u=s[1];return(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){o(!0),u(e)}}})),(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(k.Z,{style:{top:20},open:r,okText:"Save",onCancel:function(){o(!1)},maskClosable:!1,width:1400,destroyOnClose:!0,className:"app-modal-body-overflow",footer:null,children:(0,d.jsx)(G,{accountId:c})})})})),ne=n(2351),ae=n(187),ie=n(4165),re=n(5861),oe=n(5518),le=function(){function e(){(0,S.Z)(this,e)}return(0,T.Z)(e,null,[{key:"get",value:function(e){return I.Z.get("../"+e)}},{key:"save",value:function(e,t){return I.Z.post(this.baseURL+"/save",e,t)}},{key:"remove",value:function(e){return I.Z.post(this.baseURL+"/remove",e)}}]),e}();function se(e){var t=e.fileList,n=e.setFileList,a=e.count,i=void 0===a?1:a,r=e.disabled,o=void 0!==r&&r,l=function(){var e=(0,re.Z)((0,ie.Z)().mark((function e(a){var i,r,o,l,s,c;return(0,ie.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=a.onSuccess,r=a.onError,o=a.file,l=a.onProgress,s=new FormData,c={onUploadProgress:function(e){l({percent:e.loaded/e.total*100})}},s.append("file",o);try{le.save(s,c).then((function(e){i("Ok"),n([].concat((0,p.Z)(t),[{uid:e.data.uid,url:e.data.url,name:e.data.name}]))}))}catch(u){r({err:u})}case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,d.jsx)(oe.Z,{accept:"text/csv",customRequest:l,onChange:function(e){e.file;var t=e.fl;typeof t!==typeof[]&&(t=[]),n(t)},onRemove:function(e){le.remove({uid:e.uid}).then((function(e){}))},listType:"picture",fileList:t,className:"image-upload-grid",disabled:o,onPreview:function(e){return fetch(e.url,{method:"GET"}).then((function(e){return e.json()})).then((function(e){return e.thumbnail}))},children:(null===t||void 0===t?void 0:t.length)>=i?null:(0,d.jsx)(u.Z,{icon:(0,d.jsx)(ne.Z,{}),type:"dashed",danger:!0,style:{margin:30,width:"134%"},children:"Upload CSV File"})})}function ce(e){var t=e.transactionType,n=void 0===t?"credit":t,i=window.location.pathname.split("/")[2],r=(0,a.useState)([]),o=(0,Z.Z)(r,2),l=o[0],s=o[1],c=(0,a.useState)(!1),f=(0,Z.Z)(c,2),m=f[0],h=f[1],p=(0,a.useState)([]),v=(0,Z.Z)(p,2),y=v[0],b=v[1],C=(0,a.useState)([]),w=(0,Z.Z)(C,2),k=w[0],D=w[1],S=(0,a.useState)({page:1,limit:20,transactionType:n}),T=(0,Z.Z)(S,2),I=T[0],N=T[1],Y=(0,a.useRef)(),F=(0,a.useRef)(),E=[{title:"Account Name",dataIndex:"accountDetail",render:function(e){return null===e||void 0===e?void 0:e.name}},{title:"Receivable Account",dataIndex:"accountRecievable",width:250,hidden:"debit"===n},{title:"Date",dataIndex:"date",width:150,render:function(e){return M()(e).format("DD MMM YYYY")}},{title:"Amount",dataIndex:"amount",width:150},{title:"Bill Number",dataIndex:"billNumber",width:150},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(O.Z,{title:"Are you sure to delete this Account data?",onConfirm:function(){B(t._id)},okText:"Yes",cancelText:"No",children:[(0,d.jsx)(u.Z,{type:"primary",size:"small",danger:!0,icon:(0,d.jsx)(H.Z,{})}),"\xa0"]}),(0,d.jsx)(u.Z,{type:"primary",size:"small",icon:(0,d.jsx)(Q.Z,{}),onClick:function(){Y.current.openForm(t._id)}})]})}}].filter((function(e){return!e.hidden}));function q(){h(!0),R.list(I).then((function(e){var t;s(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{key:e._id})}))),N((0,x.Z)((0,x.Z)({},I),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){h(!1)}))}var B=function(e){R.delete(e).then((function(e){L(e.message),q(),b([])})).catch((function(e){L(e.message,"error")}))},U=E.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{ellipsis:!1})}));U[0].fixed=!0,U[U.length-1].fixed="right";var z={bordered:!0,loading:m,size:"small",title:function(){return(0,d.jsx)(ue,{addNewModalRef:Y,uploadCsvModalRef:F,selected:y,deleteData:B,qData:I,setQData:N,list:q,accounts:k})},showHeader:!0,footer:function(){return(0,d.jsx)(_,{qData:I,setQData:N})},rowSelection:{onChange:function(e){b(e)}},tableLayout:void 0};return(0,a.useEffect)((function(){N((0,x.Z)((0,x.Z)({},I),{},{transactionType:"sales-transaction"===i?"debit":"credit"}))}),[i]),(0,a.useEffect)((function(){q()}),[I.page,I.limit,I.transactionType]),(0,a.useEffect)((function(){A.list({isAll:1}).then((function(e){D(e.data)})).catch((function(e){"object"===typeof e.message?L(e.message[Object.keys(e.message)[0]],"error"):L(e.message,"error")}))}),[]),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(j.Z.Title,{level:5,style:{margin:0},children:"List of  Transactions"}),(0,d.jsx)(g.Z,(0,x.Z)((0,x.Z)({},z),{},{pagination:{position:["none"],pageSize:I.limit},columns:U,dataSource:l.length?l:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,d.jsx)(de,{ref:Y,list:q,accounts:k}),(0,d.jsx)(fe,{ref:F,transactionType:n,list:q})]})}function ue(e){var t=e.addNewModalRef,n=e.uploadCsvModalRef,a=e.selected,i=e.deleteData,r=e.qData,o=e.setQData,l=e.list,s=e.accounts;return(0,d.jsx)(v.Z,{onSubmitCapture:l,className:"search-form",children:(0,d.jsxs)(y.Z,{gutter:[12,2],children:[(0,d.jsx)(b.Z,{span:4,children:(0,d.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,d.jsx)(C.Z,{placeholder:"Choose a account",value:r.accountId,onChange:function(e){o((0,x.Z)((0,x.Z)({},r),{},{accountId:e}))},allowClear:!0,children:s.map((function(e){return(0,d.jsx)(C.Z.Option,{value:e._id,children:e.name},e._id)}))})})}),(0,d.jsx)(b.Z,{span:4,children:(0,d.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,d.jsx)(w.Z.RangePicker,{format:"DD MMM YYYY",onChange:function(e){o((0,x.Z)((0,x.Z)({},r),{},{startTime:new Date(e[0]),endTime:new Date(e[1])}))}})})}),(0,d.jsx)(b.Z,{span:3,children:(0,d.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,d.jsx)(u.Z,{type:"primary",htmlType:"submit",children:"Search"})})}),(0,d.jsxs)(b.Z,{span:10,children:[(0,d.jsx)(v.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,d.jsx)(u.Z,{type:"primary",icon:(0,d.jsx)(V.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),(0,d.jsx)(v.Z.Item,{style:{marginBottom:0,float:"right",marginRight:"1rem"},children:(0,d.jsx)(u.Z,{type:"primary",icon:(0,d.jsx)(ne.Z,{}),onClick:function(){n.current.openForm()},children:"Upload File (CSV)"})}),a.length?(0,d.jsx)(O.Z,{title:"Are you sure to delete these selected Data?",onConfirm:function(){i(a)},okText:"Yes",cancelText:"No",children:(0,d.jsx)(u.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,d.jsx)(H.Z,{}),children:"Delete Selected"})}):null]})]})})}le.baseURL="file";var de=(0,a.forwardRef)((function(e,t){var n=e.list,i=e.accounts,r=(0,a.useState)(!1),o=(0,Z.Z)(r,2),l=o[0],s=o[1],c=(0,a.useState)({aspect:1}),f=(0,Z.Z)(c,2),m=f[0],h=f[1],p=(0,a.useState)(!1),j=(0,Z.Z)(p,2),g=j[0],D=j[1],S=function(e){Object.entries(e).forEach((function(e){for(var t=m,n=e[0],a=e[1],i=n.split("."),r=0;r<i.length;r++)r+1===i.length?t[i[r]]=a:("undefined"===typeof t[i[r]]&&(1*parseInt(i[r+1])>=0?t[i[r]]=[]:t[i[r]]={}),t=t[i[r]])})),h((0,x.Z)({},m))};(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){s(!0),h(e?{_id:e}:{status:!0})}}}));var T=function(){D(!0),R.save(m).then((function(e){L(e.message),S((0,x.Z)({},e.data)),n()})).catch((function(e){"object"===typeof e.message?L(e.message[Object.keys(e.message)[0]],"error"):L(e.message,"error")})).finally((function(){D(!1)}))};return(0,a.useEffect)((function(){m._id&&(D(!0),R.detail(m._id).then((function(e){h(e.data||{})})).catch((function(e){L(e.message,"error")})).finally((function(){D(!1)})))}),[m._id]),(0,a.useEffect)((function(){l||h({_id:null})}),[l]),(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(k.Z,{title:(m._id?"Edit":"Add")+" Transaction Data",style:{top:20},open:l,okText:"Save",onOk:T,okButtonProps:{disabled:g},onCancel:function(){s(!1)},maskClosable:!1,width:1200,className:"app-modal-body-overflow",footer:[(0,d.jsx)(u.Z,{onClick:function(){s(!1)},children:"Cancel"},"cancel"),(0,d.jsx)(u.Z,{type:"primary",onClick:T,children:"Save"},"save")],children:(0,d.jsx)(P.Z,{spinning:g,indicator:(0,d.jsx)(W.Z,{style:{fontSize:24},spin:!0}),children:(0,d.jsx)(v.Z,{layout:"vertical",children:(0,d.jsxs)(y.Z,{gutter:[12,2],children:[(0,d.jsx)(b.Z,{span:6,children:(0,d.jsx)(v.Z.Item,{label:"Account Id",required:!0,children:(0,d.jsx)(C.Z,{value:m.accountId,onChange:function(e){S({accountId:e})},children:i.map((function(e){return(0,d.jsx)(C.Z.Option,{value:e._id,children:e.name},e._id)}))})})}),(0,d.jsx)(b.Z,{span:6,children:(0,d.jsx)(v.Z.Item,{label:"Amount",required:!0,children:(0,d.jsx)(z.Z,{placeholder:"Enter Amount",type:"number",min:0,value:m.amount,onChange:function(e){return S({amount:e.target.value})}})})}),(0,d.jsx)(b.Z,{span:6,children:(0,d.jsx)(v.Z.Item,{label:"Type",required:!0,children:(0,d.jsx)(z.Z,{placeholder:"Enter your type",value:m.type,onChange:function(e){return S({type:e.target.value})}})})}),(0,d.jsx)(b.Z,{span:6,children:(0,d.jsx)(v.Z.Item,{label:"Bill Number",required:!0,children:(0,d.jsx)(z.Z,{placeholder:"Enter bill number",value:m.billNumber,onChange:function(e){return S({billNumber:e.target.value})}})})}),(0,d.jsx)(b.Z,{span:12,children:(0,d.jsx)(v.Z.Item,{label:"Account Recievable",required:!0,children:(0,d.jsx)(z.Z,{value:m.accountRecievable,onChange:function(e){return S({accountRecievable:e.target.value})}})})}),(0,d.jsx)(b.Z,{span:6,children:(0,d.jsx)(v.Z.Item,{label:"Date",required:!0,children:(0,d.jsx)(w.Z,{format:"DD MMM YYYY",onChange:function(e){S({date:e})},value:M()(null===m||void 0===m?void 0:m.date),className:"w-100"})})}),(0,d.jsx)(b.Z,{span:24,children:(0,d.jsx)(v.Z.Item,{label:"Comment",children:(0,d.jsx)(z.Z.TextArea,{cols:8,rows:6,value:m.comment,onChange:function(e){return S({comment:e.target.value})}})})})]})})})})})})),fe=(0,a.forwardRef)((function(e,t){var n=e.list,i=e.transactionType,r=(0,a.useState)(!1),o=(0,Z.Z)(r,2),l=o[0],s=o[1],c=(0,a.useState)([]),f=(0,Z.Z)(c,2),m=f[0],h=f[1],p=(0,a.useState)(!1),x=(0,Z.Z)(p,2),j=x[0],g=x[1],v=(0,a.useState)(!1),y=(0,Z.Z)(v,2),b=y[0],C=y[1];(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){s(!0),h([])}}}));(0,a.useEffect)((function(){var e,t;null!==(e=m[0])&&void 0!==e&&e.url&&R.checkPrevTransation({url:null===(t=m[0])||void 0===t?void 0:t.url,transactionType:i}).then((function(e){var t;(null===(t=e.data.alreadyExistedDataDates)||void 0===t?void 0:t.length)>0?w(e.data.alreadyExistedDataDates):(E.ZP.success(e.message),C(!0))})).catch((function(e){E.ZP.warning(e.message)}))}),[m]);var w=function(e){k.Z.confirm({title:"Records Already exists",icon:(0,d.jsx)(ae.Z,{}),content:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("p",{children:"Records will be deleted on these dates "}),e.map((function(e,t){return(0,d.jsx)(N.Z,{color:"red",children:e},t)}))]}),okText:"Delete Records",okType:"danger",cancelText:"Cancel",onOk:function(){C(!0)},onCancel:function(){}})};return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(k.Z,{title:"Upload File (CSV)",style:{top:20},open:l,okText:"Save",onCancel:function(){s(!1)},maskClosable:!1,width:400,destroyOnClose:!0,className:"app-modal-body-overflow",footer:[(0,d.jsx)(u.Z,{onClick:function(){s(!1)},children:"Cancel"},"cancel"),(0,d.jsx)(u.Z,{type:"primary",onClick:function(){var e,t;null!==(e=m[0])&&void 0!==e&&e.url&&b&&(g(!0),R.saveFromCSVUrl({url:null===(t=m[0])||void 0===t?void 0:t.url,transactionType:i}).then((function(e){L(e.message),n(),s(!1)})).catch((function(e){"object"===typeof e.message?L(e.message[Object.keys(e.message)[0]],"error"):L(e.message,"error")})).finally((function(){g(!1)})))},disabled:!b||j,children:"Save"},"save")],children:(0,d.jsx)(se,{fileList:m,setFileList:h,count:1})})})}));function me(){return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(i.Z,{style:{minHeight:"100vh"},children:(0,d.jsxs)(i.Z,{className:"site-layout",children:[(0,d.jsx)(i.Z.Header,{style:{padding:0,height:"auto"},children:(0,d.jsx)(r.Z,{theme:"dark",mode:"horizontal",items:[{label:(0,d.jsx)(l.rU,{to:"/sales-report",children:"Sales Report"}),key:"sales-report"},{label:(0,d.jsx)(l.rU,{to:"/billing-report",children:"Billing Report"}),key:"billing-report"},{label:(0,d.jsx)(l.rU,{to:"/accounts",children:"Accounts"}),key:"accounts"},{label:(0,d.jsx)(l.rU,{to:"/bill-transaction",children:"Bill Transactions"}),key:"bill-transaction"},{label:(0,d.jsx)(l.rU,{to:"/sales-transaction",children:"Sales Transactions"}),key:"sales-transaction"},{label:null!==m.Z&&void 0!==m.Z&&m.Z.name?m.Z.name:"You",key:"profile",children:[{key:"Profile",label:"Profile"},{key:"Logout",danger:!0,label:"Logout",onClick:function(){window.localStorage.clear(),window.location.reload()}}]}]})}),(0,d.jsx)(i.Z.Content,{children:(0,d.jsx)(o.Z,{style:{borderRadius:"none"},children:(0,d.jsxs)(s.Z5,{children:[(0,d.jsx)(s.AW,{path:"sales-report",element:(0,d.jsx)(h,{})}),(0,d.jsx)(s.AW,{path:"billing-report",element:(0,d.jsx)(q,{})}),(0,d.jsx)(s.AW,{path:"accounts",element:(0,d.jsx)(X,{})}),(0,d.jsx)(s.AW,{path:"bill-transaction",element:(0,d.jsx)(ce,{transactionType:"credit"})}),(0,d.jsx)(s.AW,{path:"sales-transaction",element:(0,d.jsx)(ce,{transactionType:"debit"})}),(0,d.jsx)(s.AW,{path:"*",element:(0,d.jsx)(f,{})})]})})})]})})})}}}]);
//# sourceMappingURL=238.3990d1a0.chunk.js.map